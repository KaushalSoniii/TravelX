<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampExplorer - Login/Signup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Styles */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .bg-camping {
            background-image: url('https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .bg-camping::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 5%;
            width: 100px;
            height: 100px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>');
            background-repeat: no-repeat;
            opacity: 0.7;
            animation: float 6s ease-in-out infinite;
        }

        .form-container {
            transition: all 0.3s ease-in-out;
        }

        .form-container.hidden {
            opacity: 0;
            transform: translateX(-20px);
        }

        input::placeholder {
            color: #9CA3AF;
        }

        .tab-button {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
    </style>
</head>
<body class="bg-camping min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full">
        <h1 class="text-3xl font-bold text-center text-green-800 mb-6">TravelX</h1>
        <div class="flex mb-4">
            <button id="loginTab" class="tab-button flex-1 py-2 px-4 bg-green-600 text-white font-semibold rounded-tl-lg">Login</button>
            <button id="signupTab" class="tab-button flex-1 py-2 px-4 bg-gray-200 text-gray-700 font-semibold rounded-tr-lg">Signup</button>
        </div>
        <form id="loginForm" class="form-container space-y-4">
            <div>
                <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email</label>
                <input type="email" id="loginEmail" name="email" required placeholder="explorer@example.com" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
            </div>
            <div>
                <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                <input type="password" id="loginPassword" name="password" required placeholder="Your secret password" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
            </div>
            <button type="submit" class="w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-300 ease-in-out transform hover:scale-105">Login</button>
        </form>
        <form id="signupForm" class="form-container space-y-4 hidden">
            <div>
                <label for="signupUsername" class="block text-sm font-medium text-gray-700">Username</label>
                <input type="text" id="signupUsername" name="username" required placeholder="campExplorer" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
            </div>
            <div>
                <label for="signupEmail" class="block text-sm font-medium text-gray-700">Email</label>
                <input type="email" id="signupEmail" name="email" required placeholder="explorer@example.com" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
            </div>
            <div>
                <label for="signupPassword" class="block text-sm font-medium text-gray-700">Password</label>
                <input type="password" id="signupPassword" name="password" required placeholder="Choose a strong password" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
            </div>
            <button type="submit" class="w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-300 ease-in-out transform hover:scale-105">Sign Up</button>
        </form>
    </div>

    <script>
        const loginTab = document.getElementById('loginTab');
        const signupTab = document.getElementById('signupTab');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');

        function switchTab(activeTab, activeForm, inactiveTab, inactiveForm) {
            activeTab.classList.add('bg-green-600', 'text-white');
            activeTab.classList.remove('bg-gray-200', 'text-gray-700');
            inactiveTab.classList.add('bg-gray-200', 'text-gray-700');
            inactiveTab.classList.remove('bg-green-600', 'text-white');
            
            inactiveForm.classList.add('hidden');
            void inactiveForm.offsetWidth; // Trigger reflow
            activeForm.classList.remove('hidden');
        }

        loginTab.addEventListener('click', () => switchTab(loginTab, loginForm, signupTab, signupForm));
        signupTab.addEventListener('click', () => switchTab(signupTab, signupForm, loginTab, loginForm));

        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                const response = await fetch('http://localhost:6969/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                if (response.ok) {
                    const data = await response.json();
                    alert('Login successful!');
                    // Handle successful login (e.g., store token, redirect)
                } else {
                    const error = await response.json();
                    alert(`Login failed: ${error.message}`);
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        });

        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('signupUsername').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            try {
                const response = await fetch('http://localhost:6969/api/auth/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, email, password })
                });

                if (response.ok) {
                    const data = await response.json();
                    alert('Signup successful!');
                    // Handle successful signup (e.g., redirect to login)
                } else {
                    const error = await response.json();
                    alert(`Signup failed: ${error.message}`);
                }
            } catch (error) {
                alert(`Error: ${error.message}`);
            }
        });
    </script>
</body>
</html>
